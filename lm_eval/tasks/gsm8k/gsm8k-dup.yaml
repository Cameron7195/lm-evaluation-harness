dataset_name: main
dataset_path: gsm8k
doc_to_target: '{{answer.split(''####'')[-1].strip() if answer is defined else target}}'
doc_to_text: "Problem: {{question}}\n\nPerform the following actions:\n1. Extract the core question from the problem with 1 sentence, only the most comprehensive and detailed one!\n2. Extract the the most useful information from the problem related to the core question and list it piece by piece! Explicitly state how each operative verb translates into the relevant math, describing specifically what that verb will do to the numbers.\n3. Reason through the problem step-by-step, including every step! Use only one step per line, until you have answered the core question.\n4. Your response should end with \"The final answer is [answer]\" where [answer] is the integer which correctly answers the core question.\n"
fewshot_config:
  sampler: first_n
  samples:
  - question: There are 15 trees in the grove. Grove workers will plant trees in the
      grove today. After they are done, there will be 21 trees. How many trees did
      the grove workers plant today?
    target: "1. Core Question- How many trees did the grove workers plant today?\n\n2. Useful Info-\n     - There are 15 trees in the grove.\n     - Grove workers plant some trees in the grove today.\n     - After the grove workers are done, there will be 21 trees in the grove.\n     - The remaining number of trees cannot be negative.\n     - When a tree is planted, the number of trees in the grove increases.\n\n3. Reason Steps-\n     a) There are 15 trees originally.\n     b) Then there were 21 trees after some more were planted.\n     c) The grove workers planted enough trees to reach 21 total.\n     d) The grove workers must have planted 21 trees - 15 trees = 6 trees.\n\n4. Final Answer- The final answer is 6"
  - question: Leah had 32 chocolates and her sister had 42. If they ate 35, how many
      pieces do they have left in total?
    target: "1. Core Question- How many pieces of chocolate do Leah and her sister have in total?\n\n2. Useful Info-\n     - Leah had 32 chocolates to start.\n     - Leah's sister had 42 chocolates to start.\n     - Leah and her sister together ate 35.\n     - The remaining number of chocolates cannot be negative.\n     - When you eat chocolates, the number of chocolates you have decreases.\n\n3. Reason Steps-\n     a) Originally, Leah had 32 chocolates to start.\n     b) Leah's sister had 42 to start.\n     c) Leah and her sister together had 32 + 42 = 74\n     d) After eating 35, Leah and her sister had 74 - 35 = 39.\n\n4. Final Answer- The final answer is 39"
  - question: John's cow weighs 400 pounds. It increased its weight by 50% of its starting weight. He is able to sell the cow for $3 per pound. How much more is it worth after gaining the weight?
    target: "1. Core Question- How much more is John's cow worth after gaining weight?\n\n2. Useful Info-\n     - John's cow initially weighed 400 pounds.\n     - It increased its weight by 50%.\n     - The cow is worth 3 dollars per pound.\n     - We expect a positive increase in the cow's value.\n     - When you gain weight, your number of pounds increases.\n\n3. Reason Steps-\n     a) The cow increased by 50% of its weight.\n     b) Increasing by 50% is the same as increasing to 1.5 times.\n     c) The cow gained 400 pounds * 50% = 400 * 0.5 = 200 pounds.\n     c) The cow is worth an additional 3 dollars per pound * 200 new pounds = 600 dollars more.\n\n4. Final Answer- The final answer is 600"
  - question: Mrs. Snyder used to spend 40% of her monthly income on rent and utilities. Her monthly salary was recently increased by $600 so now her rent and utilities only amount to 25% of her monthly income. How much was her previous monthly income?
    target: "1. Core Question- How much was Mrs. Snyder's previous monthly income?\n\n2. Useful Info-\n     - 40% of Mrs. Snyder's income used to go to rent and utilities.\n     - Her monthly income was increased by 600 dollars.\n     - Rent and utilities take up 25% of her income now.\n\n3. Reason Steps-\n     a) Let x represent her previous monthly income.\n     b) Mrs. Snyder's new monthly income is (x + 600).\n     c) Cost of rent and utilities = 0.4 * x, and cost of rent and utilities also = 0.25 * (x + 600).\n     d) 0.4 * (x) = 0.25 * (x + 600)\n     e) 1.6 * x = x + 600\n     f) 0.6 * x = 600\n     g) x = 1000\n     h) Mrs. Snyder's old monthly income was 1,000 per month.\n\n4. Final Answer- The final answer is 1,000"
  - question: There were nine computers in the server room. Five more computers were
      installed each day, from monday to thursday. How many computers are now in the
      server room?
    target: "1. Core Question- How many computers are now in the server room?\n\n2. Useful Info-\n     - There were 9 computers in the server room originally.\n     - 5 computers were installed each day from Monday to Thursday, including both Monday and Thursday.\n     - Monday, Tuesday, Wednesday, and Thursday is 4 total days.\n     - The number of computers cannot be negative.\n     - When a computer is installed, the number of computers increases.\n\n3. Reason Steps-\n     a) There were originally 9 computers.\n     b) For each of 4 days, 5 more computers were added.\n     c) So 5 * 4 = 20 computers were installed.\n     d) In the end, there are 9 + 20 = 29 computers.\n\n4. Final Answer- The final answer is 29"
  - question: Olivia has $23. She bought five bagels for $3 each. How much money does
      she have left?
    target: "1. Core Question- How much money does Olivia have left?\n\n2. Useful Info-\n     - Olivia started with 23 dollars.\n     - Olivia bought 5 bagels.\n     - Each bagel was 3 dollars.\n     - When you buy something you have less money afterwards.\n\n3. Reason Steps-\n     a) Olivia had 23 dollars to start with.\n     b) Five bagels at three dollars each costs 5 bagels * 3 dollars per bagel = 15 dollars.\n     c) After buying the bagels, Olivia will have 23 dollars - 15 dollars = 8 dollars.\n\n4. Final Answer- The final answer is 8"
  - question: The ratio of coins that Elsa has to that which Amalie has is 10:45. If the total number of coins they have is 440, and Amalie spends 3/4 of what she has on toys, how many will she remain with?
    target: "1. Core Question- How many coins is Amalie left with?\n\n2. Useful Info-\n     - The ratio of Elsa's coins to Amalie's coins is 10:45.\n     - Amalie starts with more coins than Elsa.\n     - Elsa and Amalie together have 440 coins.\n     - Amalie spends 75% of her coins on toys.\n     - When you spend coins, the number of coins you have decreases.\n\n3. Reason Steps-\n     a) Amalie has 4.5 times as many coins as Elsa.\n     b) Amalie has a large fraction of the total coins. Start by finding this fraction.\n     c) Amalie's fraction of the total is (45) / (10 + 45) = 45/55.\n     d) The total number of coins is 440.\n     e) The number of coins that Amalie has is (45 / 55) * 440 = (9 / 11) * (40 * 11) = 9 * 40 = 360.\n     f) Amelie spends 3/4 of her coins.\n     g) The number of coins that Amelie spends is (3/4) * 360 = 270.\n     h) Amalie is left with 360 - 270 = 90.\n\n4. Final Answer- The final answer is 90"
  - question: James creates a media empire. He creates a movie for $2,000. Each DVD cost $6 to make. He sells it for 2.5 times that much. He sells 500 movies a day for 5 days a week. How much profit does he make in 20 weeks?
    target: "1. Core Question- How much profit does James make in 20 weeks?\n\n2. Useful Info-\n     - The movie cost is 2,000 dollars.\n     - The cost of one DVD is 6 dollars.\n     - James sells DVDs for 2.5 * 6 dollars.\n     - James sells 500 DVDs per day for 5 days a week.\n     - James sells DVDs for 20 weeks.\n     - Profit is total money earned minus total spent.\n     - Selling things usually increases your profit.\n\n3. Reason Steps-\n     a) James sells each DVD for 2.5 * 6 dollars = 15 dollars.\n     b) On each DVD, James profits 15 dollars - 6 dollars = 9 dollars.\n     c) Each day, James profits 9 dollars per DVD * 500 DVDs per day = 4,500 dollars per day.\n     d) Each week, James profits 4,500 dollars per day * 5 days per week = 22,500 dollars per week.\n     e) In 20 weeks, James profits 22,500 dollars per week * 20 weeks = 450,000 dollars.\n     f) Lastly, we must account for the cost of the movie, which was 2,000 dollars.\n     g) The total profit was 450,000 dollars - 2,000 dollars = 448,000 dollars.\n\n4. Final Answer- The final answer is 448,000"
#  - question: If there are 3 cars in the parking lot and 2 more cars arrive, how many
#      cars are in the parking lot?
#    target: "1. Core Question- How many cars are in the parking lot?\n\n2. Useful Info-\n     - There are 3 cars in the parking lot.\n     - 2 more cars arrive to the parking lot.\n     - No cars leave.\n     - When a car arrives, the number of cars increases.\n     - We expect a positive number of cars which is greater than 3.\n\n3. Reason Steps-\n     a) There are originally 3 cars.\n     b) 2 more cars arrive.\n     c) 3 cars + 2 cars = 5 cars.\n\n4. Final Answer- The final answer is 5"
filter_list:
- filter:
  - function: regex
    group_select: -1
    regex_pattern: The final answer is ((-?[$0-9.,]{2,})|(-?[0-9]+))
  - function: take_first
  name: strict-match
- filter:
  - function: regex
    group_select: -1
    regex_pattern: (-?[$0-9.,]{2,})|(-?[0-9]+)
  - function: take_first
  name: flexible-extract
generation_kwargs:
  do_sample: false
  until:
  - '<|eot_id|>'
  - '<|start_header_id|>user<|end_header_id|>'
  - 'Q:'
  - </s>
  - <|im_end|>
tag:
- chain_of_thought
metadata:
  version: 3.0
metric_list:
- aggregation: mean
  higher_is_better: true
  ignore_case: true
  ignore_punctuation: false
  metric: exact_match
  regexes_to_ignore:
  - ','
  - \$
  - '(?s).*#### '
  - \.$
num_fewshot: 8
output_type: generate_until
repeats: 1
task: gsm8k_dup
test_split: test
